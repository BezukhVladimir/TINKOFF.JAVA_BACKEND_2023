(function(){var TTM_INSTALLER_PARAMS={"account":"tinkoff-pwa","container":"edu","hash":"bc72433d-8861-4a65-93c8-5d1eb0a5e156","storageUrl":"https://acdn.tinkoff.ru/twa/ttm"};(function(){var r="".concat(TTM_INSTALLER_PARAMS.storageUrl,"/polyfills/polyfills-v1.js"),o=!1,l=function(){(function(){var m="ttm",p="_ttm",h={BUILD_ID:"buildId",LOGGER:"logger",BUILD_ENTITIES:"buildEntities",RUNTIME_API:"$",RUN:"run"},v={INSTALLED:"ttm-installed"},b="_",I="ttmBuild",g={PUBLICATIONS:"publications",PROD_BUILDS:"builds",ENVIRONMENTS:"environments"};var x=function(t,i){var e,o,r,a;return(a=(o=(e=t.split(i)[1])===null||e===void 0?void 0:e.split("="))===null||o===void 0||(r=o[1])===null||r===void 0?void 0:r.split("&"))===null||a===void 0?void 0:a[0]},B=function(t){var i=x(t,I);if(!i)return null;var e=i.split(b);if(e.length!==3&&e.length!==4)return null;var o=e[0],r=e[1],a=e[2],n=e.length===4?e[3]:null;return{hash:o,container:a,env:n,account:r}},w=function(t){var i=t.account,e=t.container,o=t.hash,r=t.storageUrl,a="".concat(r,"/").concat(i,"/").concat(g.PROD_BUILDS,"/").concat(e,"/").concat(o),n="".concat(i,"/").concat(e,"/").concat(o),s=B(window.location.search);return s&&(s.env===null?a="".concat(r,"/").concat(s.account,"/").concat(g.PROD_BUILDS,"/").concat(s.container,"/").concat(s.hash):a="".concat(r,"/").concat(s.account,"/").concat(g.ENVIRONMENTS,"/").concat(s.env,"/").concat(s.container,"/").concat(s.hash),n="".concat(s.env?"".concat(s.env,":"):"").concat(s.account,"/").concat(s.container,"/").concat(s.hash)),{src:"".concat(a,"/ttm.js"),buildId:n}};var E=function(t,i){window.addEventListener("error",function(e){try{if(typeof e!="object"||!e)return;var o=e.error,r=e.filename,a=e.lineno,n=e.colno,s=e.message;(typeof r=="string"&&r&&r.includes(t)||o&&typeof o=="object"&&typeof o.stack=="string"&&o.stack.includes(t))&&i.error({message:s,lineno:a,colno:n},"unhandled-error")}catch(l){}}),window.addEventListener("unhandledrejection",function(e){try{if(!e||typeof e!="object"||!e.reason||typeof e.reason!="object")return;var o=e.reason.stack;typeof o=="string"&&o.includes(t)&&i.error(e.reason,"unhandled-rejection")}catch(r){}})};var _=function(t){try{return typeof window=="undefined"||!window.localStorage||typeof window.localStorage.getItem!="function"?null:window.localStorage.getItem(t)}catch(i){return null}},L=function(t){return new Promise(function(i,e){var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=t,r.crossOrigin="anonymous",o.appendChild(r),r.onload=function(){return i(r)},r.onerror=function(){return e(new Error("Error when loading ".concat(t," script")))}})};function N(t,i){return i!=null&&typeof Symbol!="undefined"&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](t):t instanceof i}var d=function(t){try{return JSON.stringify(t)}catch(i){return"Stringify error while log try"}},S=function(t){return N(t,Error)?{message:t.message,name:t.name,stack:t.stack}:t},R=function(t){return t&&typeof t=="object"&&"message"in t?t.message:null};function U(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var D=function t(i,e,o){"use strict";var r=this;U(this,t),this.account=i,this.container=e,this.buildId=o,this.loggerUrl="https://www.tinkoff.ru/api/front/log/collect",this.loggerLocalStorageFlagName="_ttm_logger_",this.sendErrorProbability=1,this.sendDataProbability=.01,this.errorsLimit=20,this.errorsByTypes={},this.messageTypeColorMap={error:"red",info:"lightgray",data:"darkblue"},this.stdout=function(a,n,s){try{if(!_(r.loggerLocalStorageFlagName))return;console.log("%c%s","background-color: ".concat(r.messageTypeColorMap[a],"; color: white; padding: 2px 5px; border-radius: 5px; font-weight: 600; font-size: 12px;"),"TTM:".concat(a).concat(s?":".concat(s):""),n)}catch(l){}},this.sendLog=function(a,n,s){Math.random()>a||fetch(r.loggerUrl,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:d({system:"ttm",appName:"ttm",component:"ttm",level:n,from:"browser",ttmInfo:{account:r.account,container:r.container,buildId:r.buildId,session:r.session},ttmData:s})}).catch(function(){return null})},this.error=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"runtime-error";try{if(r.stdout("error",a,n),r.errorsByTypes[n]||(r.errorsByTypes[n]=0),r.errorsByTypes[n]+=1,r.errorsByTypes[n]===r.errorsLimit){var s={type:n,errorLimit:r.errorsLimit};r.stdout("data",s,"error-limit-exceeded"),r.sendLog(1,"info",{type:"error-limit-exceeded",data:d(s)})}if(r.errorsByTypes[n]>=r.errorsLimit)return;r.sendLog(r.sendErrorProbability,"error",{type:n,message:R(a),data:d(S(a))})}catch(l){}},this.data=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"data";try{r.stdout("data",a,n),r.sendLog(r.sendDataProbability,"info",{type:n,data:d(a)})}catch(s){}},this.info=function(a){r.stdout("info",a)},this.session="ttm-".concat(Date.now(),"-").concat(Math.round(Math.random()*1e5))};function M(t,i,e,o,r,a,n){try{var s=t[a](n),l=s.value}catch(c){e(c);return}s.done?i(l):Promise.resolve(l).then(o,r)}function O(t){return function(){var i=this,e=arguments;return new Promise(function(o,r){var a=t.apply(i,e);function n(l){M(a,o,r,n,s,"next",l)}function s(l){M(a,o,r,n,s,"throw",l)}n(void 0)})}}function A(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var C=function(t,i){var e,o,r,a,n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(e)throw new TypeError("Generator is already executing.");for(;n;)try{if(e=1,o&&(r=c[0]&2?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){n.label=c[1];break}if(c[0]===6&&n.label<r[1]){n.label=r[1],r=c;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(c);break}r[2]&&n.ops.pop(),n.trys.pop();continue}c=i.call(t,n)}catch(u){c=[6,u],o=0}finally{e=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},P=function(){var t=O(function(){var i,e,o,r,a,n,s,l,c,u,y;return C(this,function(f){switch(f.label){case 0:i="",e="",o="",r="",a="";try{i=TTM_INSTALLER_PARAMS.account,e=TTM_INSTALLER_PARAMS.container,o=TTM_INSTALLER_PARAMS.storageUrl,n=w(TTM_INSTALLER_PARAMS),s=n.src,l=n.buildId,r=s,a=l}catch(T){}if(c=new D(i,e,a),c.data({},"ttm-started"),!i||!e||!a)return c.error({message:"Empty build data"},"installation-error"),[2];window[m]=window[m]||[],window[p]=(u={},A(u,h.BUILD_ID,a),A(u,h.LOGGER,c),u),E(o,c),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,L(r)];case 2:f.sent();try{window[p][h.RUN](),window.dispatchEvent(new CustomEvent(v.INSTALLED)),c.data({},"ttm-installed")}catch(T){c.error(T,"installation-error")}return[3,4];case 3:return y=f.sent(),c.error(y,"loading-error"),[3,4];case 4:return[2]}})});return function(){return t.apply(this,arguments)}}();P();})();};try{o=!window.Promise.prototype.finally||!window.URL||!window.URLSearchParams||!window.AbortController||!Object.fromEntries}catch(a){o=!0}o?(n=document.getElementsByTagName("head")[0],e=document.createElement("script"),e.type="text/javascript",e.src=r,e.crossOrigin="anonymous",e.onload=l,e.onerror=function(){return null},n.appendChild(e)):l();var n,e;})();})()